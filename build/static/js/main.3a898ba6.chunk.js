(this["webpackJsonpappointment-react"]=this["webpackJsonpappointment-react"]||[]).push([[0],{11:function(e,t,n){},49:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(22),c=n.n(s),i=n(8),o=(n(49),n(13)),l=n(2),d=(n(11),n(0));var u=function(){return Object(d.jsx)("header",{className:"header bg-gray py-2",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"logo d-flex justify-content-center align-items-center",children:[Object(d.jsx)("span",{children:"\u8a3a\u6240LOGO"}),Object(d.jsx)("h1",{children:"\u770b\u8a3a\u9810\u7d04\u81ea\u52a9\u5831\u5230"})]})})})},p=n(44),h=n(3),j=n.n(h),b=n(10),m=n(16),f=n(17),x=n(19),O=n(18),v=function(e){return Object(d.jsx)("div",{className:"py-3",children:Object(d.jsx)("div",{className:"my-btn-xl btn-red-w",onClick:function(t){return e.handleConfirm(t)},children:e.children})})},y=function(e){var t=e.isTyped,n=e.typedValue;return Object(d.jsx)("div",{className:"board-controll py-3",children:t?Object(d.jsx)("div",{id:"board",className:"board text-center typing",children:n}):Object(d.jsx)("div",{id:"board",className:"board text-center",children:"\u8acb\u7528\u756b\u9762\u9375\u76e4\u8f38\u5165\u96fb\u8a71\u865f\u78bc"})})},g=function(e){Object(x.a)(n,e);var t=Object(O.a)(n);function n(e){return Object(m.a)(this,n),t.call(this)}return Object(f.a)(n,[{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{id:"typeWrap",className:"type-wrap py-3",children:[Object(d.jsx)("div",{className:"type-item","data-name":1,onClick:function(t){e.props.handletypeing(t)},children:"1"}),Object(d.jsx)("div",{className:"type-item","data-name":2,onClick:function(t){e.props.handletypeing(t)},children:"2"}),Object(d.jsx)("div",{className:"type-item","data-name":3,onClick:function(t){e.props.handletypeing(t)},children:"3"}),Object(d.jsx)("div",{className:"type-item","data-name":4,onClick:function(t){e.props.handletypeing(t)},children:"4"}),Object(d.jsx)("div",{className:"type-item","data-name":5,onClick:function(t){e.props.handletypeing(t)},children:"5"}),Object(d.jsx)("div",{className:"type-item","data-name":6,onClick:function(t){e.props.handletypeing(t)},children:"6"}),Object(d.jsx)("div",{className:"type-item","data-name":7,onClick:function(t){e.props.handletypeing(t)},children:"7"}),Object(d.jsx)("div",{className:"type-item","data-name":8,onClick:function(t){e.props.handletypeing(t)},children:"8"}),Object(d.jsx)("div",{className:"type-item","data-name":9,onClick:function(t){e.props.handletypeing(t)},children:"9"}),Object(d.jsx)("div",{className:"type-item","data-name":"\u6e05\u7a7a",onClick:function(t){e.props.handleReset(t)},children:"X"}),Object(d.jsx)("div",{className:"type-item","data-name":0,onClick:function(t){e.props.handletypeing(t)},children:"0"}),Object(d.jsx)("div",{className:"type-item","data-name":"\u9000\u56de",onClick:function(t){e.props.handleback(t)},children:"\u2190"})]})}}]),n}(r.a.Component),w=n(40),N=n.n(w),C=n(41),k=n.n(C)()(N.a),S=function(e){Object(x.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handletypeing=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.state.stepNumber<9)){e.next=5;break}n=t.target.getAttribute("data-name"),a.setState({typedValue:a.state.typedValue+n,isTyped:!0,history:a.state.history.concat(a.state.typedValue),stepNumber:a.state.history.length},(function(){console.log("addNum ".concat(n," | typedValue"),a.state.typedValue,"isTyped",a.state.isTyped,"history",a.state.history,"stepNumber",a.state.stepNumber),a.hendleChangeisConfirm()})),e.next=11;break;case 5:return e.next=7,a.hendleSwalMsgPhoneOver10Err();case 7:return e.next=9,a.handleSwal(a.state.swalMassge);case 9:return e.next=11,a.handleReset();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleConfirm=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("1"),!a.state.isConfirm){e.next=14;break}return e.prev=2,e.next=5,a.hendleGetdeta();case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:n?a.props.push("/info"):(a.hendleSwalMsgData(n),a.handleSwal(a.state.swalMassge)),e.next=18;break;case 14:return e.next=16,a.hendleSwalMsgPhoneVeryfyErr();case 16:return e.next=18,a.handleSwal(a.state.swalMassge);case 18:a.handleReset();case 19:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),a.hendleGetdeta=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,a.props.setPhoneNumber(a.state.typedValue);case 3:return t.phoneNumber=e.sent,e.next=6,a.props.handleGetReservation();case 6:return t.reservation=e.sent,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)}))),a.handleSwal=function(e){console.log("msg",e),k.fire({title:e.title,text:e.text,icon:e.icon,confirmButtonText:e.confirmButtonText})},a.hendleSwalMsgPhoneOver10Err=function(){a.setState({swalMassge:{title:"\u932f\u8aa4\uff01",text:"\u4e0d\u80fd\u8d85\u904e10\u500b\u865f\u78bc\u5594\uff01",icon:"error",confirmButtonText:"\u77e5\u9053\u4e86"}})},a.hendleSwalMsgPhoneVeryfyErr=function(){a.setState({swalMassge:{title:"\u932f\u8aa4\uff01",text:"\u9019\u4e0d\u662f\u4e00\u500b\u5408\u6cd5\u7684\u96fb\u8a71\u865f\u78bc\uff01",icon:"error",confirmButtonText:"\u77e5\u9053\u4e86"}})},a.hendleSwalMsgData=function(e){e||a.setState({swalMassge:{title:"\u9a57\u8b49\u554f\u984c",text:"\u96fb\u8a71\u865f\u78bc\u8207\u8cc7\u6599\u5eab\u8cc7\u6599\u4e0d\u76f8\u7b26\uff0c\u8acb\u91cd\u65b0\u8f38\u5165",icon:"error",confirmButtonText:"\u77e5\u9053\u4e86"}})},a.handleback=function(){a.state.stepNumber>0?a.setState({typedValue:a.state.history[a.state.stepNumber],stepNumber:a.state.stepNumber-1,history:a.state.history.slice(0,a.state.stepNumber)},(function(){console.log(a.state.isTyped,"history",a.state.history,"stepNumber",a.state.stepNumber),a.hendleChangeisConfirm()})):a.handleReset()},a.handleConfirmPhone=function(e){return new RegExp(/^(0\d{1,2})-?(\d{6,7})(#\d+)?$/).test(e)},a.hendleChangeisConfirm=function(){a.handleConfirmPhone(a.state.typedValue)?a.setState({isConfirm:!0},(function(){console.log("isConfirm",a.state.isConfirm)})):a.setState({isConfirm:!1},(function(){console.log("isConfirm",a.state.isConfirm)}))},a.handleReset=function(){a.setState({isTyped:!1,isConfirm:!1,typedValue:"",history:[],stepNumber:0})},a.state={isTyped:!1,isConfirm:!1,typedValue:"",history:[],stepNumber:0,swalMassge:{title:"",text:"",icon:"",confirmButtonText:""}},a}return Object(f.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:"container text-center",children:[Object(d.jsx)(y,{isTyped:this.state.isTyped,typedValue:this.state.typedValue}),Object(d.jsx)(g,{handletypeing:this.handletypeing,handleReset:this.handleReset,handleback:this.handleback}),Object(d.jsx)(v,{handleConfirm:this.handleConfirm,children:"\u78ba\u8a8d"})]})}}]),n}(r.a.Component),T=n(42),M=n.n(T).a.create({baseURL:"https://api.drvet.info"}),I=function(e){return M.get("/api/checkin/verify",e)},E=function(e){return M.get("/api/checkin",e)},P=function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),r=n[0],s=n[1];console.log(r);var c=window.location.search,i=function(){var t=Object(b.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:n=t.sent,e.setReservation(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("3"),e.next=3,h();case 3:return t=e.sent,console.log("3-1"),console.log(t),n=t.accessToken,e.next=9,m(n);case 9:return a=e.sent,r=a.reservation,console.log("3-2"),console.log("reservation",r),e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){(function(){var t=Object(b.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u();case 2:n=t.sent,e.setHostId(n.hostId),e.setTotp(n.totp);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),console.log("hostId",e.hostId);var u=function(){var e=new URLSearchParams(c),t={};return t.totp=e.get("totp"),t.hostId=e.get("hostId"),t},h=function(){var t=Object(b.a)(j.a.mark((function t(){var n,a,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("4"),t.next=3,x();case 3:return n=t.sent,console.log("4-1"),console.log("hostId",e.hostId),console.log(e),t.next=9,I({params:{totp:e.totp,hostId:e.hostId,latitude:n.latitude,longitude:n.longitude}});case 9:return a=t.sent,r=a.data,console.log("data",r),console.log("4-2"),t.abrupt("return",r);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({headers:{"x-auth":t},params:{phoneNumber:r}});case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){return new Promise((function(t,n){navigator.geolocation.getCurrentPosition(t,n,e)}))},x=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:return t=e.sent,n=t.coords,a=n.latitude,r=n.longitude,e.abrupt("return",{latitude:a,longitude:r});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return x(),Object(d.jsx)("main",{children:Object(d.jsx)(S,Object(p.a)({reservation:e.reservation,handleGetReservation:i,setPhoneNumber:s,phoneNumber:r},e))})};var R=function(e){var t=e.reservation,n=t.startDate.replace(/-/g,"/");return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsxs)("dl",{className:"info-list text-center pt-3",children:[Object(d.jsxs)("dd",{children:[Object(d.jsx)("h5",{children:"\u98fc\u4e3b\u540d\u7a31"}),Object(d.jsxs)("p",{children:[t.memberName," \u5148\u751f/\u5c0f\u59d0"]})]}),Object(d.jsxs)("dd",{children:[Object(d.jsx)("h5",{children:"\u5bf5\u7269\u540d\u7a31"}),Object(d.jsx)("p",{children:t.petName})]}),Object(d.jsxs)("dd",{children:[Object(d.jsx)("h5",{children:"\u91ab\u5e2b\u540d\u7a31"}),Object(d.jsx)("p",{children:"\u300c\u300d \u91ab\u5e2b"})]}),Object(d.jsxs)("dd",{children:[Object(d.jsx)("h5",{children:"\u9810\u7d04\u65e5\u671f/\u6642\u9593"}),Object(d.jsxs)("p",{children:[n,"\u3000",t.startTime]})]})]}),Object(d.jsx)("div",{className:"note",children:Object(d.jsx)("p",{className:"text-center",children:"\u8acb\u78ba\u8a8d\u8cc7\u6599\u662f\u5426\u6b63\u78ba\uff0c\u6b63\u78ba\u8acb\u6309\u5831\u5230"})}),Object(d.jsxs)("div",{className:"btn-warp",children:[Object(d.jsx)(i.b,{to:"/checkin",className:"my-btn btn-red-w",children:"\u5831\u5230"}),Object(d.jsx)(i.b,{to:"/",className:"my-btn btn-outline-gray",children:"\u91cd\u65b0\u8f38\u5165"})]})]})};var V,B,F=function(){var e=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate(),r=e.getHours(),s=e.getMinutes(),c="".concat(t," / ").concat(n," / ").concat(a," ").concat(r,":").concat(s);return console.log(c),c}();return Object(d.jsxs)("div",{className:"container py-5 mt-5 d-flex flex-column justify-content-center align-items-center",children:[Object(d.jsx)("div",{className:"title text-center ",children:Object(d.jsx)("p",{children:"\u5831\u5230\u6210\u529f"})}),Object(d.jsxs)("div",{className:"time-warp py-5 mt-4 text-center pt-3",children:[Object(d.jsx)("p",{children:"\u5831\u5230\u6642\u9593"}),Object(d.jsx)("p",{children:e})]}),Object(d.jsx)(i.b,{to:"/",className:"my-btn btn-red-w",children:"\u56de\u9996\u9801"})]})},L=["title","titleId"];function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function G(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function z(e,t){var n=e.title,r=e.titleId,s=G(e,L);return a.createElement("svg",D({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 486.5 486.5",style:{enableBackground:"new 0 0 486.5 486.5"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},s),n?a.createElement("title",{id:r},n):null,V||(V=a.createElement("style",{type:"text/css"},"\n\t.st0{fill:#F2AF44;}\n")),B||(B=a.createElement("g",null,a.createElement("g",null,a.createElement("path",{className:"st0",d:"M243.2,333.4c-13.6,0-25,11.4-25,25s11.4,25,25,25c13.1,0,25-11.4,24.4-24.4 C268.2,344.7,256.9,333.4,243.2,333.4z"}),a.createElement("path",{className:"st0",d:"M474.6,422c15.7-27.1,15.8-59.4,0.2-86.4L318.2,64.4c-15.5-27.3-43.5-43.5-74.9-43.5s-59.4,16.3-74.9,43.4 L11.6,335.8c-15.6,27.3-15.5,59.8,0.3,86.9c15.6,26.8,43.5,42.9,74.7,42.9h312.8C430.7,465.6,458.8,449.3,474.6,422z M440.6,402.4 c-8.7,15-24.1,23.9-41.3,23.9H86.5c-17,0-32.3-8.7-40.8-23.4c-8.6-14.9-8.7-32.7-0.1-47.7L202.4,83.8 c8.5-14.9,23.7-23.7,40.9-23.7c17.1,0,32.4,8.9,40.9,23.8l156.7,271.4C449.3,369.9,449.2,387.5,440.6,402.4z"}),a.createElement("path",{className:"st0",d:"M237,157.9c-11.9,3.4-19.3,14.2-19.3,27.3c0.6,7.9,1.1,15.9,1.7,23.8c1.7,30.1,3.4,59.6,5.1,89.7 c0.6,10.2,8.5,17.6,18.7,17.6s18.2-7.9,18.7-18.2c0-6.2,0-11.9,0.6-18.2c1.1-19.3,2.3-38.6,3.4-57.9c0.6-12.5,1.7-25,2.3-37.5 c0-4.5-0.6-8.5-2.3-12.5C260.8,160.8,248.9,155.1,237,157.9z"})))))}var H=a.forwardRef(z);n.p;var A=function(){return Object(d.jsx)("div",{className:"container text-center",children:Object(d.jsxs)("div",{className:"not-find-warp my-5",children:[Object(d.jsx)("div",{className:"not-find-img",children:Object(d.jsx)(H,{})}),Object(d.jsx)("div",{className:"not-find-code",children:"404"}),Object(d.jsx)("di",{className:"not-find-info",children:"\u767c\u751f\u4e86\u932f\u8aa4\uff0c\u7a0d\u7b49\u4e00\u4e0b\u5e6b\u60a8\u8f49\u56de\u9996\u9801\u3002\u5982\u679c\u6c92\u6709\u8df3\u8f49\uff0c\u8acb\u6309\u56de\u9996\u9801\u3002"}),Object(d.jsx)("div",{className:"btn-warp",children:Object(d.jsx)(i.b,{to:"/",className:"my-btn btn-outline-gray my-4",children:"\u56de\u9996\u9801"})})]})})};function J(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(""),i=Object(o.a)(c,2),p=i[0],h=i[1],j=Object(a.useState)(""),b=Object(o.a)(j,2),m=b[0],f=b[1],x=Object(l.f)();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(u,{}),Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{exact:!0,path:"/",render:function(){return Object(d.jsx)(P,{push:x.push,setHostId:s,setReservation:f,setTotp:h,hostId:r,totp:p,reservation:m})}}),Object(d.jsx)(l.a,{path:"/checkin",children:Object(d.jsx)(F,{})}),Object(d.jsx)(l.a,{path:"/info",render:function(){return Object(d.jsx)(R,{reservation:m})}}),Object(d.jsx)(l.a,{path:"*",children:Object(d.jsx)(A,{})})]})]})}var U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,85)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};n(83);c.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(i.a,{children:Object(d.jsx)(J,{})})}),document.getElementById("root")),U()}},[[84,1,2]]]);
//# sourceMappingURL=main.3a898ba6.chunk.js.map